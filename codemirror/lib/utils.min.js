(function(){function a(a,b,c){var d=a.getWrapperElement(),e;return e=d.appendChild(document.createElement("div")),c?e.className="CodeMirror-dialog CodeMirror-dialog-bottom":e.className="CodeMirror-dialog CodeMirror-dialog-top",e.innerHTML=b,e}CodeMirror.defineExtension("openDialog",function(b,c,d){function h(){if(f)return;f=!0,e.parentNode.removeChild(e)}var e=a(this,b,d&&d.bottom),f=!1,g=this,i=e.getElementsByTagName("input")[0],j;if(i)CodeMirror.connect(i,"keydown",function(a){if(a.keyCode==13||a.keyCode==27)CodeMirror.e_stop(a),h(),g.focus(),a.keyCode==13&&c(i.value)}),d&&d.value&&(i.value=d.value),i.focus(),CodeMirror.connect(i,"blur",h);else if(j=e.getElementsByTagName("button")[0])CodeMirror.connect(j,"click",function(){h(),g.focus()}),j.focus(),CodeMirror.connect(j,"blur",h);return h}),CodeMirror.defineExtension("openConfirm",function(b,c,d){function j(){if(g)return;g=!0,e.parentNode.removeChild(e),h.focus()}var e=a(this,b,d&&d.bottom),f=e.getElementsByTagName("button"),g=!1,h=this,i=1;f[0].focus();for(var k=0;k<f.length;++k){var l=f[k];(function(a){CodeMirror.connect(l,"click",function(b){CodeMirror.e_preventDefault(b),j(),a&&a(h)})})(c[k]),CodeMirror.connect(l,"blur",function(){--i,setTimeout(function(){i<=0&&j()},200)}),CodeMirror.connect(l,"focus",function(){++i})}})})(),function(){function a(a,b,c,d){this.atOccurrence=!1,this.cm=a,d==null&&typeof b=="string"&&(d=!1),c=c?a.clipPos(c):{line:0,ch:0},this.pos={from:c,to:c};if(typeof b!="string")b.global||(b=new RegExp(b.source,b.ignoreCase?"ig":"g")),this.matches=function(c,d){if(c){b.lastIndex=0;var e=a.getLine(d.line).slice(0,d.ch),f=b.exec(e),g=0;while(f){g+=f.index+1,e=e.slice(g),b.lastIndex=0;var h=b.exec(e);if(h)f=h;else break}g--}else{b.lastIndex=d.ch;var e=a.getLine(d.line),f=b.exec(e),g=f&&f.index}if(f)return{from:{line:d.line,ch:g},to:{line:d.line,ch:g+f[0].length},match:f}};else{d&&(b=b.toLowerCase());var e=d?function(a){return a.toLowerCase()}:function(a){return a},f=b.split("\n");f.length==1?this.matches=function(c,d){var f=e(a.getLine(d.line)),g=b.length,h;if(c?d.ch>=g&&(h=f.lastIndexOf(b,d.ch-g))!=-1:(h=f.indexOf(b,d.ch))!=-1)return{from:{line:d.line,ch:h},to:{line:d.line,ch:h+g}}}:this.matches=function(b,c){var d=c.line,g=b?f.length-1:0,h=f[g],i=e(a.getLine(d)),j=b?i.indexOf(h)+h.length:i.lastIndexOf(h);if(b?j>=c.ch||j!=h.length:j<=c.ch||j!=i.length-h.length)return;for(;;){if(b?!d:d==a.lineCount()-1)return;i=e(a.getLine(d+=b?-1:1)),h=f[b?--g:++g];if(g>0&&g<f.length-1){if(i!=h)return;continue}var k=b?i.lastIndexOf(h):i.indexOf(h)+h.length;if(b?k!=i.length-h.length:k!=h.length)return;var l={line:c.line,ch:j},m={line:d,ch:k};return{from:b?m:l,to:b?l:m}}}}}a.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(a){function d(a){var c={line:a,ch:0};return b.pos={from:c,to:c},b.atOccurrence=!1,!1}var b=this,c=this.cm.clipPos(a?this.pos.from:this.pos.to);for(;;){if(this.pos=this.matches(a,c))return this.atOccurrence=!0,this.pos.match||!0;if(a){if(!c.line)return d(0);c={line:c.line-1,ch:this.cm.getLine(c.line-1).length}}else{var e=this.cm.lineCount();if(c.line==e-1)return d(e);c={line:c.line+1,ch:0}}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(a){var b=this;this.atOccurrence&&(b.pos.to=this.cm.replaceRange(a,b.pos.from,b.pos.to))}},CodeMirror.defineExtension("getSearchCursor",function(b,c,d){return new a(this,b,c,d)})}(),function(){function a(){this.posFrom=this.posTo=this.query=null,this.marked=[]}function b(b){return b._searchState||(b._searchState=new a)}function c(a,b,c){return a.getSearchCursor(b,c,typeof b=="string"&&b==b.toLowerCase())}function d(a,b,c,d){a.openDialog?a.openDialog(b,d):d(prompt(c,""))}function e(a,b,c,d){a.openConfirm?a.openConfirm(b,d):confirm(c)&&d[0]()}function f(a){var b=a.match(/^\/(.*)\/([a-z]*)$/);return b?new RegExp(b[1],b[2].indexOf("i")==-1?"":"i"):a}function h(a,e){var h=b(a);if(h.query)return i(a,e);d(a,g,"Search for:",function(b){a.operation(function(){if(!b||h.query)return;h.query=f(b);if(a.lineCount()<2e3)for(var d=c(a,h.query);d.findNext();)h.marked.push(a.markText(d.from(),d.to(),"CodeMirror-searching"));h.posFrom=h.posTo=a.getCursor(),i(a,e)})})}function i(a,d){a.operation(function(){var e=b(a),f=c(a,e.query,d?e.posFrom:e.posTo);if(!f.find(d)){f=c(a,e.query,d?{line:a.lineCount()-1}:{line:0,ch:0});if(!f.find(d))return}a.setSelection(f.from(),f.to()),e.posFrom=f.from(),e.posTo=f.to()})}function j(a){a.operation(function(){var c=b(a);if(!c.query)return;c.query=null;for(var d=0;d<c.marked.length;++d)c.marked[d].clear();c.marked.length=0})}function n(a,b){d(a,k,"Replace:",function(g){if(!g)return;g=f(g),d(a,l,"Replace with:",function(d){if(b)a.compoundChange(function(){a.operation(function(){for(var b=c(a,g);b.findNext();)if(typeof g!="string"){var e=a.getRange(b.from(),b.to()).match(g);b.replace(d.replace(/\$(\d)/,function(a,b){return e[b]}))}else b.replace(d)})});else{j(a);var f=c(a,g,a.getCursor());function h(){var b=f.from(),d;if(!(d=f.findNext())){f=c(a,g);if(!(d=f.findNext())||b&&f.from().line==b.line&&f.from().ch==b.ch)return}a.setSelection(f.from(),f.to()),e(a,m,"Replace?",[function(){i(d)},h])}function i(a){f.replace(typeof g=="string"?d:d.replace(/\$(\d)/,function(b,c){return a[c]})),h()}h()}})})}var g='Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',k='Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',l='With: <input type="text" style="width: 10em"/>',m="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";CodeMirror.commands.find=function(a){j(a),h(a)},CodeMirror.commands.findNext=h,CodeMirror.commands.findPrev=function(a){h(a,!0)},CodeMirror.commands.clearSearch=j,CodeMirror.commands.replace=n,CodeMirror.commands.replaceAll=function(a){n(a,!0)}}(),CodeMirror.tagRangeFinder=function(a,b,c){var d="A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",e=d+"-:.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",f=new RegExp("^["+d+"]["+e+"]*"),g=a.getLine(b),h=!1,i=null,j=0;while(!h){j=g.indexOf("<",j);if(-1==j)return;if(j+1<g.length&&g[j+1]=="/"){j++;continue}if(!g.substr(j+1).match(f)){j++;continue}var k=g.indexOf(">",j+1);if(-1==k){var l=b+1,m=!1,n=a.lineCount();while(l<n&&!m){var o=a.getLine(l),p=o.indexOf(">");if(-1!=p){m=!0;var q=o.lastIndexOf("/",p);if(-1!=q&&q<p){var r=g.substr(q,p-q+1);if(!r.match(/\/\s*\>/))return c===!0&&l++,l}}l++}h=!0}else{var s=g.lastIndexOf("/",k);if(-1==s)h=!0;else{var r=g.substr(s,k-s+1);r.match(/\/\s*\>/)||(h=!0)}}if(h){var t=g.substr(j+1);i=t.match(f),i?(i=i[0],-1!=g.indexOf("</"+i+">",j)&&(h=!1)):h=!1}h||j++}if(h){var u="(\\<\\/"+i+"\\>)|(\\<"+i+"\\>)|(\\<"+i+"\\s)|(\\<"+i+"$)",v=new RegExp(u,"g"),w="</"+i+">",x=1,l=b+1,n=a.lineCount();while(l<n){g=a.getLine(l);var y=g.match(v);if(y)for(var z=0;z<y.length;z++){y[z]==w?x--:x++;if(!x)return c===!0&&l++,l}l++}return}},CodeMirror.braceRangeFinder=function(a,b,c){var d=a.getLine(b),e=d.length,f,g;for(;;){var h=d.lastIndexOf("{",e);if(h<0)break;g=a.getTokenAt({line:b,ch:h}).className;if(!/^(comment|string)/.test(g)){f=h;break}e=h-1}if(f==null||d.lastIndexOf("}")>f)return;var i=1,j=a.lineCount(),k;l:for(var m=b+1;m<j;++m){var n=a.getLine(m),o=0;for(;;){var p=n.indexOf("{",o),q=n.indexOf("}",o);p<0&&(p=n.length),q<0&&(q=n.length),o=Math.min(p,q);if(o==n.length)break;if(a.getTokenAt({line:m,ch:o+1}).className==g)if(o==p)++i;else if(!--i){k=m;break l}++o}}if(k==null||k==b+1)return;return c===!0&&k++,k},CodeMirror.indentRangeFinder=function(a,b){var c=a.getOption("tabSize"),d=a.getLineHandle(b).indentation(c),e;for(var f=b+1,g=a.lineCount();f<g;++f){var h=a.getLineHandle(f);if(!/^\s*$/.test(h.text)){if(h.indentation(c)<=d)break;e=f}}return e?e+1:null},CodeMirror.newFoldFunction=function(a,b,c){function e(a,b){for(var c=0;c<d.length;++c){var e=a.lineInfo(d[c].start);if(!e)d.splice(c--,1);else if(e.line==b)return{pos:c,region:d[c]}}}function f(a,b){a.clearMarker(b.start);for(var c=0;c<b.hidden.length;++c)a.showLine(b.hidden[c])}var d=[];return b==null&&(b='<div style="position: absolute; left: 2px; color:#600">&#x25bc;</div>%N%'),function(g,h){g.operation(function(){var i=e(g,h);if(i)d.splice(i.pos,1),f(g,i.region);else{var j=a(g,h,c);if(j==null)return;var k=[];for(var l=h+1;l<j;++l){var m=g.hideLine(l);m&&k.push(m)}var n=g.setMarker(h,b),o={start:n,hidden:k};g.onDeleteLine(n,function(){f(g,o)}),d.push(o)}})}}